"use client";
import {useState} from "react";
import {useSession} from "next-auth/react";
import styles from "./NavBar.module.css";
import Link from "next/link";

export default function NavBar() {
  const [clicked, setClicked] = useState(false);
  const {status} = useSession();

  function handleClicked() {
    setClicked(!clicked);
  }

  return (
    <nav className={styles["navbar"]}>
      <button
        className={styles["menu-toggle-button"]}
        aria-label="اظهار القائمة"
        aria-controls="navbar-links"
        aria-expanded={clicked ? "true" : "false"}
        onClick={handleClicked}
      >
        {clicked ? (
          <svg width="35" height="30" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M17.2642 13.7344L27.129 3.87019C27.2123 3.787 27.2783 3.68822 27.3234 3.57949C27.3685 3.47076 27.3917 3.35422 27.3917 3.23653C27.3917 3.11883 27.3685 3.00229 27.3234 2.89356C27.2783 2.78483 27.2123 2.68605 27.129 2.60286L25.2437 0.716863C25.0756 0.548911 24.8477 0.454575 24.6101 0.45459C24.3725 0.45456 24.1446 0.548897 23.9765 0.716863L14.1117 10.5818L4.24687 0.716863C4.07876 0.548897 3.85084 0.45456 3.6132 0.45459C3.37559 0.454575 3.14769 0.548911 2.9796 0.716863L1.09429 2.60286C1.01103 2.68605 0.944985 2.78483 0.899922 2.89356C0.854859 3.00229 0.831665 3.11883 0.831665 3.23653C0.831665 3.35422 0.854859 3.47076 0.899922 3.57949C0.944985 3.68822 1.01103 3.787 1.09429 3.87019L10.9591 13.7344L1.09527 23.5974C0.745151 23.9477 0.745151 24.5146 1.09527 24.8647L2.98069 26.7507C3.14849 26.9185 3.37641 27.013 3.6143 27.013C3.85219 27.013 4.08005 26.9185 4.24802 26.7507L14.1116 16.887L23.9753 26.7507C24.1434 26.9187 24.3713 27.0131 24.6089 27.013C24.8469 27.013 25.0747 26.9185 25.2425 26.7507L27.1279 24.8647C27.4781 24.5146 27.4781 23.9477 27.1279 23.5974L17.2642 13.7344Z"
              fill="black"
            />
          </svg>
        ) : (
          <svg width="35" height="30" viewBox="0 0 35 25" xmlns="http://www.w3.org/2000/svg">
            <path
              fillRule="evenodd"
              clipRule="evenodd"
              d="M0.541634 2.78133C0.541634 1.63074 1.47437 0.697998 2.62497 0.697998H32.625C33.7756 0.697998 34.7083 1.63074 34.7083 2.78133C34.7083 3.93192 33.7756 4.86466 32.625 4.86466H2.62497C1.47437 4.86466 0.541634 3.93192 0.541634 2.78133ZM0.541634 12.7813C0.541634 11.6307 1.47437 10.698 2.62497 10.698H32.625C33.7756 10.698 34.7083 11.6307 34.7083 12.7813C34.7083 13.9319 33.7756 14.8647 32.625 14.8647H2.62497C1.47437 14.8647 0.541634 13.9319 0.541634 12.7813ZM0.541634 22.7813C0.541634 21.6307 1.47437 20.698 2.62497 20.698H32.625C33.7756 20.698 34.7083 21.6307 34.7083 22.7813C34.7083 23.9319 33.7756 24.8647 32.625 24.8647H2.62497C1.47437 24.8647 0.541634 23.9319 0.541634 22.7813Z"
              fill="#292929"
            />
          </svg>
        )}
      </button>
      <Link href="/" aria-label="الصفحة الرئيسية" className={styles["logo"]}>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="40" height="40" viewBox="0 0  40 40">
          <path
            fill="#372f28"
            fillRule="evenodd"
            d="M35.135-.002a2 2 0 0 1 2 2v32.606a2 2 0 0 1-2 2H2.643a2 2 0 0 1-1.999-2V1.998a2 2 0 0 1 2-2h32.491zM7.607 5.775v25.526h5.396V20.757H23.96v10.545h5.385V5.775H23.96v10.532H13.004V5.775H7.607z"
          />
        </svg>
        <svg
          className={styles["logo-text"]}
          xmlns="http://www.w3.org/2000/svg"
          width="185.13"
          height="35.67"
          viewBox="0 0 186 37"
        >
          <path d="M36.358 21.16c-.043 2.586-1.45 5.012-3.423 6.627-1.071.93-2.322 1.627-3.624 2.177l-1.689-4.026c1.79-.774 3.659-1.986 4.257-3.948.207-.982.074-1.996.112-2.994V6.536h4.368V21.16zM162.55 3.055l-3.908 3.481c3.324-.022 7.278 1.206 8.489 4.645.9 2.558.44 5.309.554 7.966 1.45-.05 2.924.108 4.356-.094 1.277-.635.674-2.231.815-3.366V.461h4.352l-.028 17.961c-.233 3.107-3.337 5.434-6.376 5.076h-37.281c-.934 3.15-3.798 5.269-6.723 6.45l-1.672-4.01c2.177-.881 4.655-2.707 4.35-5.347V6.536h4.37v12.61h7.03V6.536h4.351v12.61h18.088c-.051-1.879.116-3.774-.111-5.64-.832-2.692-4.21-2.812-6.536-2.502-1.66-.295-4.063 1.857-5.125.772l-1.641-2.989L159.409 0l3.141 3.055zM16.479 10.904c-1.631.016-3.266-.032-4.895.025-.809.131-1.186.983-1.078 1.727v2.924c1.603-.029 3.331-.036 4.672.981 1.963 1.411 2.438 4.059 2.15 6.323-.345 3.157-3.002 5.686-6.029 6.362-3.378.852-7.409.054-9.686-2.732-1.293-1.506-1.689-3.532-1.6-5.466V9.402H4.38l.006 12.552c.04 1.903 1.958 3.117 3.696 3.236 1.873.217 4.147-.549 4.804-2.476.267-.915.28-2.389-.811-2.752-1.843-.07-3.695-.011-5.541-.031-.525.168-.358-.356-.378-.693l.028-7.567c.232-2.906 2.992-5.304 5.902-5.136h4.393v4.368z" />
          <path
            fillRule="evenodd"
            d="M90.316 17.85c.101 3.266-3.059 6.002-6.264 5.648H55.249c-.803 3.727-4.572 6.436-8.357 6.074h-4.646v-4.351c2.126-.056 4.27.122 6.382-.111 1.319-.204 2.812-2.089.718-1.612-2.397-.12-5.073.49-7.119-1.119-1.857-1.289-2.425-3.635-2.25-5.775-.053-2.379-.053-4.939 1.531-6.891 2.271-3.303 7.261-4.225 10.49-1.787 2.471 1.651 3.651 4.688 3.404 7.588v3.632h4.881c.005-2.256-.264-4.785 1.445-6.566 1.898-1.278 3.352-2.715 5.069-4.245 3.522-2.362 8.907-2.642 12.016.556 2.118 2.195 1.939 5.34 1.913 8.155v2.1c1.472-.052 2.97.11 4.424-.094 1.263-.616.682-2.182.815-3.297V.461h4.352V17.85zm-42.643-6.945c-2.193-.064-3.382 2.245-3.345 4.23.008 1.147-.199 2.368.202 3.456.803.946 2.184.417 3.271.556h3.25c-.066-1.928.15-3.884-.144-5.79a3.45 3.45 0 0 0-3.234-2.452zM65.932 15c-1.496.1-1.287 1.834-1.28 2.914-.091.812-.091 1.532.93 1.232.527-.177 1.84.432 1.647-.465-.126-1.146.371-2.544-.564-3.434-.215-.146-.468-.254-.733-.247zm6.809-4.112c-1.187.013-4.6.505-2.454 1.821 1.624 1.771 1.277 4.238 1.31 6.438h4.778c-.067-1.978.162-3.985-.173-5.938-.419-1.5-1.965-2.369-3.462-2.32zm42.387-4.352c3.863-.048 7.34 3.231 7.691 7.047.082 2.287.018 4.58.038 6.869.021 1.548.032 3.152-.69 4.568-1.227 2.872-4.343 4.739-7.448 4.551h-5.033V25.22l5.951-.028c1.031-.109 2.006-.744 2.444-1.696-1.868-.015-3.739.033-5.605-.028-2.728-.229-5.051-2.693-5.058-5.442.024-1.597-.072-3.2.082-4.791.485-3.705 3.863-6.754 7.629-6.701zm0 4.368c-1.955-.057-3.513 1.865-3.345 3.754.014 1.16-.029 2.323.022 3.48.11.773.932 1.104 1.629 1.008h5.073l-.017-5.133c-.159-1.683-1.654-3.118-3.362-3.109z"
          />
          <path d="M25.353 23.498h-4.352V.461h4.352zm72.898 0h-4.352V.461h4.352zm86.892 0h-4.351V.461h4.351z" />
          <ellipse cx="143.031" cy="2.669" rx="2.203" ry="2.211" />
          <ellipse cx="137.788" cy="2.66" rx="2.203" ry="2.211" />
          <ellipse cx="11.251" cy="33.461" rx="2.203" ry="2.211" />
          <ellipse cx="6.008" cy="33.452" rx="2.203" ry="2.211" />
        </svg>
      </Link>
      <search>
        <form action="" className={styles["search-form"]}>
          <input type="text" className={styles["search-input"]} placeholder="ابحث" aria-label="بحث" name="search" />
          <button aria-label="زر البحث" className={styles["search-button"]}>
            <svg width="35" height="34" viewBox="0 0 35 34" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M14.477 2.01575C8.08606 2.01575 2.91699 7.03278 2.91699 13.2357C2.91699 19.4387 8.08606 24.4557 14.477 24.4557C16.7587 24.4557 18.8704 23.8061 20.6607 22.7026L29.012 30.8082L31.902 28.0032L23.657 20.0214C25.1392 18.1342 26.037 15.7958 26.037 13.2357C26.037 7.03278 20.8679 2.01575 14.477 2.01575ZM14.477 4.65575C19.3725 4.65575 23.317 8.48426 23.317 13.2357C23.317 17.9872 19.3725 21.8157 14.477 21.8157C9.58152 21.8157 5.63699 17.9872 5.63699 13.2357C5.63699 8.48426 9.58152 4.65575 14.477 4.65575Z"
                fill="white"
              />
            </svg>
          </button>
        </form>
      </search>
      <ul className={styles[!clicked ? "hide-list" : "show-list"]} id="navbar-links">
        <li>
          <Link href="/contact" onClick={() => setClicked(false)}>
            التواصل
          </Link>
        </li>
        <li>
          <Link href="#">الفروع</Link>
        </li>
      </ul>
      <Link href="/account" className={styles["account-link"]}>
        <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" fill="none">
          <rect width="33" height="33" x="1.368" y="1.266" stroke="#000" strokeWidth="2" rx="2.96" />
          {status === "authenticated" ? (
            <path
              xmlns="http://www.w3.org/2000/svg"
              d="M21.334 19.835c2.527-1.235 4.267-3.831 4.267-6.833 0-4.198-3.403-7.601-7.601-7.601s-7.601 3.403-7.601 7.601c0 3.002 1.74 5.598 4.267 6.833-.331.102-.658.22-.979.354a11.27 11.27 0 0 0-6.099 6.099 11.27 11.27 0 0 0-.858 4.313h22.538a11.27 11.27 0 0 0-3.301-7.968 11.27 11.27 0 0 0-3.656-2.443 11.26 11.26 0 0 0-.979-.354z"
              fill="#000"
            />
          ) : (
            <path
              fill="#000"
              d="M22.946 13.064c0 2.709-2.235 4.973-5.078 4.973-2.842 0-5.078-2.264-5.078-4.973s2.236-4.973 5.078-4.973 5.078 2.264 5.078 4.973m-.556 6.81c2.243-1.455 3.724-3.962 3.724-6.81 0-4.496-3.691-8.142-8.246-8.142-4.554 0-8.246 3.646-8.246 8.142 0 2.848 1.482 5.355 3.725 6.81a11.8 11.8 0 0 0-3.786 2.505 11.6 11.6 0 0 0-2.554 3.774 11.5 11.5 0 0 0-.898 4.457h3.168c0-1.108.221-2.206.652-3.232a8.5 8.5 0 0 1 1.858-2.744 8.6 8.6 0 0 1 2.787-1.84 8.7 8.7 0 0 1 6.589 0 8.6 8.6 0 0 1 2.788 1.84 8.5 8.5 0 0 1 1.858 2.744 8.4 8.4 0 0 1 .65 3.232h3.169c0-1.53-.305-3.045-.898-4.457a11.6 11.6 0 0 0-2.553-3.774 11.8 11.8 0 0 0-3.787-2.505"
            />
          )}
        </svg>
        <span className={styles["account-icon-text"]}>حسابي</span>
      </Link>
      <svg
        className={styles["cart-icon"]}
        xmlns="http://www.w3.org/2000/svg"
        fill="#000000"
        height="35"
        width="35"
        viewBox="0 0 489 489"
      >
        <path d="M440.1 422.7l-28-315.3c-.6-7-6.5-12.3-13.4-12.3h-57.6C340.3 42.5 297.3 0 244.5 0s-95.8 42.5-96.6 95.1H90.3c-7 0-12.8 5.3-13.4 12.3l-28 315.3c0 .4-.1.8-.1 1.2 0 35.9 32.9 65.1 73.4 65.1h244.6c40.5 0 73.4-29.2 73.4-65.1 0-.4 0-.8-.1-1.2zM244.5 27c37.9 0 68.8 30.4 69.6 68.1H174.9c.8-37.7 31.7-68.1 69.6-68.1zm122.3 435H122.2c-25.4 0-46-16.8-46.4-37.5l26.8-302.3h45.2v41c0 7.5 6 13.5 13.5 13.5s13.5-6 13.5-13.5v-41h139.3v41c0 7.5 6 13.5 13.5 13.5s13.5-6 13.5-13.5v-41h45.2l26.9 302.3c-.4 20.7-21.1 37.5-46.4 37.5z" />
      </svg>
    </nav>
  );
}
